(function(){function t(t,n,e){for(var r=(e||0)-1,i=t?t.length:0;++r<i;)if(t[r]===n)return r;return-1}function n(n,e){var r=typeof e;if(n=n.cache,"boolean"==r||null==e)return n[e]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?e:m+e;return n=(n=n[r])&&n[i],"object"==r?n&&t(n,e)>-1?0:-1:n?0:-1}function e(t){var n=this.cache,e=typeof t;if("boolean"==e||null==t)n[t]=!0;else{"number"!=e&&"string"!=e&&(e="object");var r="number"==e?t:m+t,i=n[e]||(n[e]={});"object"==e?(i[r]||(i[r]=[])).push(t):i[r]=!0}}function r(t){return t.charCodeAt(0)}function i(t,n){for(var e=t.criteria,r=n.criteria,i=-1,a=e.length;++i<a;){var o=e[i],u=r[i];if(o!==u){if(o>u||"undefined"==typeof o)return 1;if(u>o||"undefined"==typeof u)return-1}}return t.index-n.index}function a(t){var n=-1,r=t.length,i=t[0],a=t[r/2|0],o=t[r-1];if(i&&"object"==typeof i&&a&&"object"==typeof a&&o&&"object"==typeof o)return!1;var u=l();u["false"]=u["null"]=u["true"]=u.undefined=!1;var c=l();for(c.array=t,c.cache=u,c.push=e;++n<r;)c.push(t[n]);return c}function o(t){return"\\"+U[t]}function u(){return d.pop()||[]}function l(){return v.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function c(t){t.length=0,d.length<b&&d.push(t)}function s(t){var n=t.cache;n&&s(n),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,v.length<b&&v.push(t)}function f(t,n,e){n||(n=0),"undefined"==typeof e&&(e=t?t.length:0);for(var r=-1,i=e-n||0,a=Array(0>i?0:i);++r<i;)a[r]=t[n+r];return a}function p(e){function d(t){return t&&"object"==typeof t&&!Yr(t)&&Ar.call(t,"__wrapped__")?t:new v(t)}function v(t,n){this.__chain__=!!n,this.__wrapped__=t}function b(t){function n(){if(r){var t=f(r);Mr.apply(t,arguments)}if(this instanceof n){var a=J(e.prototype),o=e.apply(a,t||arguments);return Ln(o)?o:a}return e.apply(i,t||arguments)}var e=t[0],r=t[2],i=t[4];return Xr(n,t),n}function U(t,n,e,r,i){if(e){var a=e(t);if("undefined"!=typeof a)return a}var o=Ln(t);if(!o)return t;var l=kr.call(t);if(!$[l])return t;var s=Jr[l];switch(l){case z:case O:return new s(+t);case W:case F:return new s(t);case N:return a=s(t.source,R.exec(t)),a.lastIndex=t.lastIndex,a}var p=Yr(t);if(n){var h=!r;r||(r=u()),i||(i=u());for(var d=r.length;d--;)if(r[d]==t)return i[d];a=p?s(t.length):{}}else a=p?f(t):ai({},t);return p&&(Ar.call(t,"index")&&(a.index=t.index),Ar.call(t,"input")&&(a.input=t.input)),n?(r.push(t),i.push(a),(p?Xn:li)(t,function(t,o){a[o]=U(t,n,e,r,i)}),h&&(c(r),c(i)),a):a}function J(t){return Ln(t)?Ir(t):{}}function Q(t,n,e){if("function"!=typeof t)return Ye;if("undefined"==typeof n||!("prototype"in t))return t;var r=t.__bindData__;if("undefined"==typeof r&&(Qr.funcNames&&(r=!t.name),r=r||!Qr.funcDecomp,!r)){var i=Pr.call(t);Qr.funcNames||(r=!H.test(i)),r||(r=B.test(i),Xr(t,r))}if(r===!1||r!==!0&&1&r[1])return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,i){return t.call(n,e,r,i)};case 4:return function(e,r,i,a){return t.call(n,e,r,i,a)}}return Me(t,n)}function X(t){function n(){var t=l?o:this;if(i){var d=f(i);Mr.apply(d,arguments)}if((a||s)&&(d||(d=f(arguments)),a&&Mr.apply(d,a),s&&d.length<u))return r|=16,X([e,p?r:-4&r,d,null,o,u]);if(d||(d=arguments),c&&(e=t[h]),this instanceof n){t=J(e.prototype);var v=e.apply(t,d);return Ln(v)?v:t}return e.apply(t,d)}var e=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],l=1&r,c=2&r,s=4&r,p=8&r,h=e;return Xr(n,t),n}function Y(e,r){var i=-1,o=cn(),u=e?e.length:0,l=u>=y&&o===t,c=[];if(l){var f=a(r);f?(o=n,r=f):l=!1}for(;++i<u;){var p=e[i];o(r,p)<0&&c.push(p)}return l&&s(r),c}function tn(t,n,e,r){for(var i=(r||0)-1,a=t?t.length:0,o=[];++i<a;){var u=t[i];if(u&&"object"==typeof u&&"number"==typeof u.length&&(Yr(u)||hn(u))){n||(u=tn(u,n,e));var l=-1,c=u.length,s=o.length;for(o.length+=c;++l<c;)o[s++]=u[l]}else e||o.push(u)}return o}function nn(t,n,e,r,i,a){if(e){var o=e(t,n);if("undefined"!=typeof o)return!!o}if(t===n)return 0!==t||1/t==1/n;var l=typeof t,s=typeof n;if(!(t!==t||t&&K[l]||n&&K[s]))return!1;if(null==t||null==n)return t===n;var f=kr.call(t),p=kr.call(n);if(f==A&&(f=I),p==A&&(p=I),f!=p)return!1;switch(f){case z:case O:return+t==+n;case W:return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case N:case F:return t==wr(n)}var h=f==M;if(!h){var d=Ar.call(t,"__wrapped__"),v=Ar.call(n,"__wrapped__");if(d||v)return nn(d?t.__wrapped__:t,v?n.__wrapped__:n,e,r,i,a);if(f!=I)return!1;var g=t.constructor,m=n.constructor;if(g!=m&&!(Bn(g)&&g instanceof g&&Bn(m)&&m instanceof m)&&"constructor"in t&&"constructor"in n)return!1}var y=!i;i||(i=u()),a||(a=u());for(var b=i.length;b--;)if(i[b]==t)return a[b]==n;var _=0;if(o=!0,i.push(t),a.push(n),h){if(b=t.length,_=n.length,o=_==b,o||r)for(;_--;){var E=b,w=n[_];if(r)for(;E--&&!(o=nn(t[E],w,e,r,i,a)););else if(!(o=nn(t[_],w,e,r,i,a)))break}}else ui(n,function(n,u,l){return Ar.call(l,u)?(_++,o=Ar.call(t,u)&&nn(t[u],n,e,r,i,a)):void 0}),o&&!r&&ui(t,function(t,n,e){return Ar.call(e,n)?o=--_>-1:void 0});return i.pop(),a.pop(),y&&(c(i),c(a)),o}function en(t,n,e,r,i){(Yr(n)?Xn:li)(n,function(n,a){var o,u,l=n,c=t[a];if(n&&((u=Yr(n))||ci(n))){for(var s=r.length;s--;)if(o=r[s]==n){c=i[s];break}if(!o){var f;e&&(l=e(c,n),(f="undefined"!=typeof l)&&(c=l)),f||(c=u?Yr(c)?c:[]:ci(c)?c:{}),r.push(n),i.push(c),f||en(c,n,e,r,i)}}else e&&(l=e(c,n),"undefined"==typeof l&&(l=n)),"undefined"!=typeof l&&(c=l);t[a]=c})}function rn(t,n){return t+Lr(Vr()*(n-t+1))}function an(e,r,i){var o=-1,l=cn(),f=e?e.length:0,p=[],h=!r&&f>=y&&l===t,d=i||h?u():p;if(h){var v=a(d);l=n,d=v}for(;++o<f;){var g=e[o],m=i?i(g,o,e):g;(r?!o||d[d.length-1]!==m:l(d,m)<0)&&((i||h)&&d.push(m),p.push(g))}return h?(c(d.array),s(d)):i&&c(d),p}function on(t){return function(n,e,r){var i={};e=d.createCallback(e,r,3);var a=-1,o=n?n.length:0;if("number"==typeof o)for(;++a<o;){var u=n[a];t(i,u,e(u,a,n),n)}else li(n,function(n,r,a){t(i,n,e(n,r,a),a)});return i}}function un(t,n,e,r,i,a){var o=1&n,u=2&n,l=4&n,c=16&n,s=32&n;if(!u&&!Bn(t))throw new xr;c&&!e.length&&(n&=-17,c=e=!1),s&&!r.length&&(n&=-33,s=r=!1);var p=t&&t.__bindData__;if(p&&p!==!0)return p=f(p),p[2]&&(p[2]=f(p[2])),p[3]&&(p[3]=f(p[3])),!o||1&p[1]||(p[4]=i),!o&&1&p[1]&&(n|=8),!l||4&p[1]||(p[5]=a),c&&Mr.apply(p[2]||(p[2]=[]),e),s&&Dr.apply(p[3]||(p[3]=[]),r),p[1]|=n,un.apply(null,p);var h=1==n||17===n?b:X;return h([t,n,e,r,i,a])}function ln(t){return ni[t]}function cn(){var n=(n=d.indexOf)===ye?t:n;return n}function sn(t){return"function"==typeof t&&Cr.test(t)}function fn(t){var n,e;return t&&kr.call(t)==I&&(n=t.constructor,!Bn(n)||n instanceof n)?(ui(t,function(t,n){e=n}),"undefined"==typeof e||Ar.call(t,e)):!1}function pn(t){return ei[t]}function hn(t){return t&&"object"==typeof t&&"number"==typeof t.length&&kr.call(t)==A||!1}function dn(t,n,e,r){return"boolean"!=typeof n&&null!=n&&(r=e,e=n,n=!1),U(t,n,"function"==typeof e&&Q(e,r,1))}function vn(t,n,e){return U(t,!0,"function"==typeof n&&Q(n,e,1))}function gn(t,n){var e=J(t);return n?ai(e,n):e}function mn(t,n,e){var r;return n=d.createCallback(n,e,3),li(t,function(t,e,i){return n(t,e,i)?(r=e,!1):void 0}),r}function yn(t,n,e){var r;return n=d.createCallback(n,e,3),_n(t,function(t,e,i){return n(t,e,i)?(r=e,!1):void 0}),r}function bn(t,n,e){var r=[];ui(t,function(t,n){r.push(n,t)});var i=r.length;for(n=Q(n,e,3);i--&&n(r[i--],r[i],t)!==!1;);return t}function _n(t,n,e){var r=ti(t),i=r.length;for(n=Q(n,e,3);i--;){var a=r[i];if(n(t[a],a,t)===!1)break}return t}function En(t){var n=[];return ui(t,function(t,e){Bn(t)&&n.push(e)}),n.sort()}function wn(t,n){return t?Ar.call(t,n):!1}function xn(t){for(var n=-1,e=ti(t),r=e.length,i={};++n<r;){var a=e[n];i[t[a]]=a}return i}function Tn(t){return t===!0||t===!1||t&&"object"==typeof t&&kr.call(t)==z||!1}function Rn(t){return t&&"object"==typeof t&&kr.call(t)==O||!1}function Hn(t){return t&&1===t.nodeType||!1}function kn(t){var n=!0;if(!t)return n;var e=kr.call(t),r=t.length;return e==M||e==F||e==A||e==I&&"number"==typeof r&&Bn(t.splice)?!r:(li(t,function(){return n=!1}),n)}function Cn(t,n,e,r){return nn(t,n,"function"==typeof e&&Q(e,r,2))}function jn(t){return Fr(t)&&!$r(parseFloat(t))}function Bn(t){return"function"==typeof t}function Ln(t){return!(!t||!K[typeof t])}function Pn(t){return An(t)&&t!=+t}function Sn(t){return null===t}function An(t){return"number"==typeof t||t&&"object"==typeof t&&kr.call(t)==W||!1}function Mn(t){return t&&"object"==typeof t&&kr.call(t)==N||!1}function zn(t){return"string"==typeof t||t&&"object"==typeof t&&kr.call(t)==F||!1}function On(t){return"undefined"==typeof t}function Dn(t,n,e){var r={};return n=d.createCallback(n,e,3),li(t,function(t,e,i){r[e]=n(t,e,i)}),r}function Wn(t){var n=arguments,e=2;if(!Ln(t))return t;if("number"!=typeof n[2]&&(e=n.length),e>3&&"function"==typeof n[e-2])var r=Q(n[--e-1],n[e--],2);else e>2&&"function"==typeof n[e-1]&&(r=n[--e]);for(var i=f(arguments,1,e),a=-1,o=u(),l=u();++a<e;)en(t,i[a],r,o,l);return c(o),c(l),t}function In(t,n,e){var r={};if("function"!=typeof n){var i=[];ui(t,function(t,n){i.push(n)}),i=Y(i,tn(arguments,!0,!1,1));for(var a=-1,o=i.length;++a<o;){var u=i[a];r[u]=t[u]}}else n=d.createCallback(n,e,3),ui(t,function(t,e,i){n(t,e,i)||(r[e]=t)});return r}function Nn(t){for(var n=-1,e=ti(t),r=e.length,i=dr(r);++n<r;){var a=e[n];i[n]=[a,t[a]]}return i}function Fn(t,n,e){var r={};if("function"!=typeof n)for(var i=-1,a=tn(arguments,!0,!1,1),o=Ln(t)?a.length:0;++i<o;){var u=a[i];u in t&&(r[u]=t[u])}else n=d.createCallback(n,e,3),ui(t,function(t,e,i){n(t,e,i)&&(r[e]=t)});return r}function $n(t,n,e,r){var i=Yr(t);if(null==e)if(i)e=[];else{var a=t&&t.constructor,o=a&&a.prototype;e=J(o)}return n&&(n=d.createCallback(n,r,4),(i?Xn:li)(t,function(t,r,i){return n(e,t,r,i)})),e}function qn(t){for(var n=-1,e=ti(t),r=e.length,i=dr(r);++n<r;)i[n]=t[e[n]];return i}function Gn(t){for(var n=arguments,e=-1,r=tn(n,!0,!1,1),i=n[2]&&n[2][n[1]]===t?1:r.length,a=dr(i);++e<i;)a[e]=t[r[e]];return a}function Kn(t,n,e){var r=-1,i=cn(),a=t?t.length:0,o=!1;return e=(0>e?Gr(0,a+e):e)||0,Yr(t)?o=i(t,n,e)>-1:"number"==typeof a?o=(zn(t)?t.indexOf(n,e):i(t,n,e))>-1:li(t,function(t){return++r>=e?!(o=t===n):void 0}),o}function Un(t,n,e){var r=!0;n=d.createCallback(n,e,3);var i=-1,a=t?t.length:0;if("number"==typeof a)for(;++i<a&&(r=!!n(t[i],i,t)););else li(t,function(t,e,i){return r=!!n(t,e,i)});return r}function Vn(t,n,e){var r=[];n=d.createCallback(n,e,3);var i=-1,a=t?t.length:0;if("number"==typeof a)for(;++i<a;){var o=t[i];n(o,i,t)&&r.push(o)}else li(t,function(t,e,i){n(t,e,i)&&r.push(t)});return r}function Jn(t,n,e){n=d.createCallback(n,e,3);var r=-1,i=t?t.length:0;if("number"!=typeof i){var a;return li(t,function(t,e,r){return n(t,e,r)?(a=t,!1):void 0}),a}for(;++r<i;){var o=t[r];if(n(o,r,t))return o}}function Qn(t,n,e){var r;return n=d.createCallback(n,e,3),Yn(t,function(t,e,i){return n(t,e,i)?(r=t,!1):void 0}),r}function Xn(t,n,e){var r=-1,i=t?t.length:0;if(n=n&&"undefined"==typeof e?n:Q(n,e,3),"number"==typeof i)for(;++r<i&&n(t[r],r,t)!==!1;);else li(t,n);return t}function Yn(t,n,e){var r=t?t.length:0;if(n=n&&"undefined"==typeof e?n:Q(n,e,3),"number"==typeof r)for(;r--&&n(t[r],r,t)!==!1;);else{var i=ti(t);r=i.length,li(t,function(t,e,a){return e=i?i[--r]:--r,n(a[e],e,a)})}return t}function Zn(t,n){var e=f(arguments,2),r=-1,i="function"==typeof n,a=t?t.length:0,o=dr("number"==typeof a?a:0);return Xn(t,function(t){o[++r]=(i?n:t[n]).apply(t,e)}),o}function te(t,n,e){var r=-1,i=t?t.length:0;if(n=d.createCallback(n,e,3),"number"==typeof i)for(var a=dr(i);++r<i;)a[r]=n(t[r],r,t);else a=[],li(t,function(t,e,i){a[++r]=n(t,e,i)});return a}function ne(t,n,e){var i=-1/0,a=i;if("function"!=typeof n&&e&&e[n]===t&&(n=null),null==n&&Yr(t))for(var o=-1,u=t.length;++o<u;){var l=t[o];l>a&&(a=l)}else n=null==n&&zn(t)?r:d.createCallback(n,e,3),Xn(t,function(t,e,r){var o=n(t,e,r);o>i&&(i=o,a=t)});return a}function ee(t,n,e){var i=1/0,a=i;if("function"!=typeof n&&e&&e[n]===t&&(n=null),null==n&&Yr(t))for(var o=-1,u=t.length;++o<u;){var l=t[o];a>l&&(a=l)}else n=null==n&&zn(t)?r:d.createCallback(n,e,3),Xn(t,function(t,e,r){var o=n(t,e,r);i>o&&(i=o,a=t)});return a}function re(t,n,e,r){if(!t)return e;var i=arguments.length<3;n=d.createCallback(n,r,4);var a=-1,o=t.length;if("number"==typeof o)for(i&&(e=t[++a]);++a<o;)e=n(e,t[a],a,t);else li(t,function(t,r,a){e=i?(i=!1,t):n(e,t,r,a)});return e}function ie(t,n,e,r){var i=arguments.length<3;return n=d.createCallback(n,r,4),Yn(t,function(t,r,a){e=i?(i=!1,t):n(e,t,r,a)}),e}function ae(t,n,e){return n=d.createCallback(n,e,3),Vn(t,function(t,e,r){return!n(t,e,r)})}function oe(t,n,e){if(t&&"number"!=typeof t.length&&(t=qn(t)),null==n||e)return t?t[rn(0,t.length-1)]:h;var r=ue(t);return r.length=Kr(Gr(0,n),r.length),r}function ue(t){var n=-1,e=t?t.length:0,r=dr("number"==typeof e?e:0);return Xn(t,function(t){var e=rn(0,++n);r[n]=r[e],r[e]=t}),r}function le(t){var n=t?t.length:0;return"number"==typeof n?n:ti(t).length}function ce(t,n,e){var r;n=d.createCallback(n,e,3);var i=-1,a=t?t.length:0;if("number"==typeof a)for(;++i<a&&!(r=n(t[i],i,t)););else li(t,function(t,e,i){return!(r=n(t,e,i))});return!!r}function se(t,n,e){var r=-1,a=Yr(n),o=t?t.length:0,f=dr("number"==typeof o?o:0);for(a||(n=d.createCallback(n,e,3)),Xn(t,function(t,e,i){var o=f[++r]=l();a?o.criteria=te(n,function(n){return t[n]}):(o.criteria=u())[0]=n(t,e,i),o.index=r,o.value=t}),o=f.length,f.sort(i);o--;){var p=f[o];f[o]=p.value,a||c(p.criteria),s(p)}return f}function fe(t){return t&&"number"==typeof t.length?f(t):qn(t)}function pe(t){for(var n=-1,e=t?t.length:0,r=[];++n<e;){var i=t[n];i&&r.push(i)}return r}function he(t){return Y(t,tn(arguments,!0,!0,1))}function de(t,n,e){var r=-1,i=t?t.length:0;for(n=d.createCallback(n,e,3);++r<i;)if(n(t[r],r,t))return r;return-1}function ve(t,n,e){var r=t?t.length:0;for(n=d.createCallback(n,e,3);r--;)if(n(t[r],r,t))return r;return-1}function ge(t,n,e){var r=0,i=t?t.length:0;if("number"!=typeof n&&null!=n){var a=-1;for(n=d.createCallback(n,e,3);++a<i&&n(t[a],a,t);)r++}else if(r=n,null==r||e)return t?t[0]:h;return f(t,0,Kr(Gr(0,r),i))}function me(t,n,e,r){return"boolean"!=typeof n&&null!=n&&(r=e,e="function"!=typeof n&&r&&r[n]===t?null:n,n=!1),null!=e&&(t=te(t,e,r)),tn(t,n)}function ye(n,e,r){if("number"==typeof r){var i=n?n.length:0;r=0>r?Gr(0,i+r):r||0}else if(r){var a=ke(n,e);return n[a]===e?a:-1}return t(n,e,r)}function be(t,n,e){var r=0,i=t?t.length:0;if("number"!=typeof n&&null!=n){var a=i;for(n=d.createCallback(n,e,3);a--&&n(t[a],a,t);)r++}else r=null==n||e?1:n||r;return f(t,0,Kr(Gr(0,i-r),i))}function _e(){for(var e=[],r=-1,i=arguments.length,o=u(),l=cn(),f=l===t,p=u();++r<i;){var h=arguments[r];(Yr(h)||hn(h))&&(e.push(h),o.push(f&&h.length>=y&&a(r?e[r]:p)))}var d=e[0],v=-1,g=d?d.length:0,m=[];t:for(;++v<g;){var b=o[0];if(h=d[v],(b?n(b,h):l(p,h))<0){for(r=i,(b||p).push(h);--r;)if(b=o[r],(b?n(b,h):l(e[r],h))<0)continue t;m.push(h)}}for(;i--;)b=o[i],b&&s(b);return c(o),c(p),m}function Ee(t,n,e){var r=0,i=t?t.length:0;if("number"!=typeof n&&null!=n){var a=i;for(n=d.createCallback(n,e,3);a--&&n(t[a],a,t);)r++}else if(r=n,null==r||e)return t?t[i-1]:h;return f(t,Gr(0,i-r))}function we(t,n,e){var r=t?t.length:0;for("number"==typeof e&&(r=(0>e?Gr(0,r+e):Kr(e,r-1))+1);r--;)if(t[r]===n)return r;return-1}function xe(t){for(var n=arguments,e=0,r=n.length,i=t?t.length:0;++e<r;)for(var a=-1,o=n[e];++a<i;)t[a]===o&&(Or.call(t,a--,1),i--);return t}function Te(t,n,e){t=+t||0,e="number"==typeof e?e:+e||1,null==n&&(n=t,t=0);for(var r=-1,i=Gr(0,jr((n-t)/(e||1))),a=dr(i);++r<i;)a[r]=t,t+=e;return a}function Re(t,n,e){var r=-1,i=t?t.length:0,a=[];for(n=d.createCallback(n,e,3);++r<i;){var o=t[r];n(o,r,t)&&(a.push(o),Or.call(t,r--,1),i--)}return a}function He(t,n,e){if("number"!=typeof n&&null!=n){var r=0,i=-1,a=t?t.length:0;for(n=d.createCallback(n,e,3);++i<a&&n(t[i],i,t);)r++}else r=null==n||e?1:Gr(0,n);return f(t,r)}function ke(t,n,e,r){var i=0,a=t?t.length:i;for(e=e?d.createCallback(e,r,1):Ye,n=e(n);a>i;){var o=i+a>>>1;e(t[o])<n?i=o+1:a=o}return i}function Ce(){return an(tn(arguments,!0,!0))}function je(t,n,e,r){return"boolean"!=typeof n&&null!=n&&(r=e,e="function"!=typeof n&&r&&r[n]===t?null:n,n=!1),null!=e&&(e=d.createCallback(e,r,3)),an(t,n,e)}function Be(t){return Y(t,f(arguments,1))}function Le(){for(var t=-1,n=arguments.length;++t<n;){var e=arguments[t];if(Yr(e)||hn(e))var r=r?an(Y(r,e).concat(Y(e,r))):e}return r||[]}function Pe(){for(var t=arguments.length>1?arguments:arguments[0],n=-1,e=t?ne(hi(t,"length")):0,r=dr(0>e?0:e);++n<e;)r[n]=hi(t,n);return r}function Se(t,n){var e=-1,r=t?t.length:0,i={};for(n||!r||Yr(t[0])||(n=[]);++e<r;){var a=t[e];n?i[a]=n[e]:a&&(i[a[0]]=a[1])}return i}function Ae(t,n){if(!Bn(n))throw new xr;return function(){return--t<1?n.apply(this,arguments):void 0}}function Me(t,n){return arguments.length>2?un(t,17,f(arguments,2),null,n):un(t,1,null,null,n)}function ze(t){for(var n=arguments.length>1?tn(arguments,!0,!1,1):En(t),e=-1,r=n.length;++e<r;){var i=n[e];t[i]=un(t[i],1,null,null,t)}return t}function Oe(t,n){return arguments.length>2?un(n,19,f(arguments,2),null,t):un(n,3,null,null,t)}function De(){for(var t=arguments,n=t.length;n--;)if(!Bn(t[n]))throw new xr;return function(){for(var n=arguments,e=t.length;e--;)n=[t[e].apply(this,n)];return n[0]}}function We(t,n){return n="number"==typeof n?n:+n||t.length,un(t,4,null,null,null,n)}function Ie(t,n,e){var r,i,a,o,u,l,c,s=0,f=!1,p=!0;if(!Bn(t))throw new xr;if(n=Gr(0,n)||0,e===!0){var d=!0;p=!1}else Ln(e)&&(d=e.leading,f="maxWait"in e&&(Gr(n,e.maxWait)||0),p="trailing"in e?e.trailing:p);var v=function(){var e=n-(vi()-o);if(0>=e){i&&Br(i);var f=c;i=l=c=h,f&&(s=vi(),a=t.apply(u,r),l||i||(r=u=null))}else l=zr(v,e)},g=function(){l&&Br(l),i=l=c=h,(p||f!==n)&&(s=vi(),a=t.apply(u,r),l||i||(r=u=null))};return function(){if(r=arguments,o=vi(),u=this,c=p&&(l||!d),f===!1)var e=d&&!l;else{i||d||(s=o);var h=f-(o-s),m=0>=h;m?(i&&(i=Br(i)),s=o,a=t.apply(u,r)):i||(i=zr(g,h))}return m&&l?l=Br(l):l||n===f||(l=zr(v,n)),e&&(m=!0,a=t.apply(u,r)),!m||l||i||(r=u=null),a}}function Ne(t){if(!Bn(t))throw new xr;var n=f(arguments,1);return zr(function(){t.apply(h,n)},1)}function Fe(t,n){if(!Bn(t))throw new xr;var e=f(arguments,2);return zr(function(){t.apply(h,e)},n)}function $e(t,n){if(!Bn(t))throw new xr;var e=function(){var r=e.cache,i=n?n.apply(this,arguments):m+arguments[0];return Ar.call(r,i)?r[i]:r[i]=t.apply(this,arguments)};return e.cache={},e}function qe(t){var n,e;if(!Bn(t))throw new xr;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}function Ge(t){return un(t,16,f(arguments,1))}function Ke(t){return un(t,32,null,f(arguments,1))}function Ue(t,n,e){var r=!0,i=!0;if(!Bn(t))throw new xr;return e===!1?r=!1:Ln(e)&&(r="leading"in e?e.leading:r,i="trailing"in e?e.trailing:i),q.leading=r,q.maxWait=n,q.trailing=i,Ie(t,n,q)}function Ve(t,n){return un(n,16,[t])}function Je(t){return function(){return t}}function Qe(t,n,e){var r=typeof t;if(null==t||"function"==r)return Q(t,n,e);if("object"!=r)return er(t);var i=ti(t),a=i[0],o=t[a];return 1!=i.length||o!==o||Ln(o)?function(n){for(var e=i.length,r=!1;e--&&(r=nn(n[i[e]],t[i[e]],null,!0)););return r}:function(t){var n=t[a];return o===n&&(0!==o||1/o==1/n)}}function Xe(t){return null==t?"":wr(t).replace(ii,ln)}function Ye(t){return t}function Ze(t,n,e){var r=!0,i=n&&En(n);n&&(e||i.length)||(null==e&&(e=n),a=v,n=t,t=d,i=En(n)),e===!1?r=!1:Ln(e)&&"chain"in e&&(r=e.chain);var a=t,o=Bn(a);Xn(i,function(e){var i=t[e]=n[e];o&&(a.prototype[e]=function(){var n=this.__chain__,e=this.__wrapped__,o=[e];Mr.apply(o,arguments);var u=i.apply(t,o);if(r||n){if(e===u&&Ln(u))return this;u=new a(u),u.__chain__=n}return u})})}function tr(){return e._=Hr,this}function nr(){}function er(t){return function(n){return n[t]}}function rr(t,n,e){var r=null==t,i=null==n;if(null==e&&("boolean"==typeof t&&i?(e=t,t=1):i||"boolean"!=typeof n||(e=n,i=!0)),r&&i&&(n=1),t=+t||0,i?(n=t,t=0):n=+n||0,e||t%1||n%1){var a=Vr();return Kr(t+a*(n-t+parseFloat("1e-"+((a+"").length-1))),n)}return rn(t,n)}function ir(t,n){if(t){var e=t[n];return Bn(e)?t[n]():e}}function ar(t,n,e){var r=d.templateSettings;t=wr(t||""),e=oi({},e,r);var i,a=oi({},e.imports,r.imports),u=ti(a),l=qn(a),c=0,s=e.interpolate||j,f="__p += '",p=Er((e.escape||j).source+"|"+s.source+"|"+(s===k?T:j).source+"|"+(e.evaluate||j).source+"|$","g");t.replace(p,function(n,e,r,a,u,l){return r||(r=a),f+=t.slice(c,l).replace(L,o),e&&(f+="' +\n__e("+e+") +\n'"),u&&(i=!0,f+="';\n"+u+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+n.length,n}),f+="';\n";var v=e.variable,g=v;g||(v="obj",f="with ("+v+") {\n"+f+"\n}\n"),f=(i?f.replace(E,""):f).replace(w,"$1").replace(x,"$1;"),f="function("+v+") {\n"+(g?"":v+" || ("+v+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m="\n/*\n//# sourceURL="+(e.sourceURL||"/lodash/template/source["+S++ +"]")+"\n*/";try{var y=mr(u,"return "+f+m).apply(h,l)}catch(b){throw b.source=f,b}return n?y(n):(y.source=f,y)}function or(t,n,e){t=(t=+t)>-1?t:0;var r=-1,i=dr(t);for(n=Q(n,e,1);++r<t;)i[r]=n(r);return i}function ur(t){return null==t?"":wr(t).replace(ri,pn)}function lr(t){var n=++g;return wr(null==t?"":t)+n}function cr(t){return t=new v(t),t.__chain__=!0,t}function sr(t,n){return n(t),t}function fr(){return this.__chain__=!0,this}function pr(){return wr(this.__wrapped__)}function hr(){return this.__wrapped__}e=e?Z.defaults(V.Object(),e,Z.pick(V,P)):V;var dr=e.Array,vr=e.Boolean,gr=e.Date,mr=e.Function,yr=e.Math,br=e.Number,_r=e.Object,Er=e.RegExp,wr=e.String,xr=e.TypeError,Tr=[],Rr=_r.prototype,Hr=e._,kr=Rr.toString,Cr=Er("^"+wr(kr).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),jr=yr.ceil,Br=e.clearTimeout,Lr=yr.floor,Pr=mr.prototype.toString,Sr=sn(Sr=_r.getPrototypeOf)&&Sr,Ar=Rr.hasOwnProperty,Mr=Tr.push,zr=e.setTimeout,Or=Tr.splice,Dr=Tr.unshift,Wr=function(){try{var t={},n=sn(n=_r.defineProperty)&&n,e=n(t,t,t)&&n}catch(r){}return e}(),Ir=sn(Ir=_r.create)&&Ir,Nr=sn(Nr=dr.isArray)&&Nr,Fr=e.isFinite,$r=e.isNaN,qr=sn(qr=_r.keys)&&qr,Gr=yr.max,Kr=yr.min,Ur=e.parseInt,Vr=yr.random,Jr={};Jr[M]=dr,Jr[z]=vr,Jr[O]=gr,Jr[D]=mr,Jr[I]=_r,Jr[W]=br,Jr[N]=Er,Jr[F]=wr,v.prototype=d.prototype;var Qr=d.support={};Qr.funcDecomp=!sn(e.WinRTError)&&B.test(p),Qr.funcNames="string"==typeof mr.name,d.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:k,variable:"",imports:{_:d}},Ir||(J=function(){function t(){}return function(n){if(Ln(n)){t.prototype=n;var r=new t;t.prototype=null}return r||e.Object()}}());var Xr=Wr?function(t,n){G.value=n,Wr(t,"__bindData__",G)}:nr,Yr=Nr||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&kr.call(t)==M||!1},Zr=function(t){var n,e=t,r=[];if(!e)return r;if(!K[typeof t])return r;for(n in e)Ar.call(e,n)&&r.push(n);return r},ti=qr?function(t){return Ln(t)?qr(t):[]}:Zr,ni={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ei=xn(ni),ri=Er("("+ti(ei).join("|")+")","g"),ii=Er("["+ti(ni).join("")+"]","g"),ai=function(t,n,e){var r,i=t,a=i;if(!i)return a;var o=arguments,u=0,l="number"==typeof e?2:o.length;if(l>3&&"function"==typeof o[l-2])var c=Q(o[--l-1],o[l--],2);else l>2&&"function"==typeof o[l-1]&&(c=o[--l]);for(;++u<l;)if(i=o[u],i&&K[typeof i])for(var s=-1,f=K[typeof i]&&ti(i),p=f?f.length:0;++s<p;)r=f[s],a[r]=c?c(a[r],i[r]):i[r];return a},oi=function(t,n,e){var r,i=t,a=i;if(!i)return a;for(var o=arguments,u=0,l="number"==typeof e?2:o.length;++u<l;)if(i=o[u],i&&K[typeof i])for(var c=-1,s=K[typeof i]&&ti(i),f=s?s.length:0;++c<f;)r=s[c],"undefined"==typeof a[r]&&(a[r]=i[r]);return a},ui=function(t,n,e){var r,i=t,a=i;if(!i)return a;if(!K[typeof i])return a;n=n&&"undefined"==typeof e?n:Q(n,e,3);for(r in i)if(n(i[r],r,t)===!1)return a;return a},li=function(t,n,e){var r,i=t,a=i;if(!i)return a;if(!K[typeof i])return a;n=n&&"undefined"==typeof e?n:Q(n,e,3);for(var o=-1,u=K[typeof i]&&ti(i),l=u?u.length:0;++o<l;)if(r=u[o],n(i[r],r,t)===!1)return a;return a},ci=Sr?function(t){if(!t||kr.call(t)!=I)return!1;var n=t.valueOf,e=sn(n)&&(e=Sr(n))&&Sr(e);return e?t==e||Sr(t)==e:fn(t)}:fn,si=on(function(t,n,e){Ar.call(t,e)?t[e]++:t[e]=1}),fi=on(function(t,n,e){(Ar.call(t,e)?t[e]:t[e]=[]).push(n)}),pi=on(function(t,n,e){t[e]=n}),hi=te,di=Vn,vi=sn(vi=gr.now)&&vi||function(){return(new gr).getTime()},gi=8==Ur(_+"08")?Ur:function(t,n){return Ur(zn(t)?t.replace(C,""):t,n||0)};return d.after=Ae,d.assign=ai,d.at=Gn,d.bind=Me,d.bindAll=ze,d.bindKey=Oe,d.chain=cr,d.compact=pe,d.compose=De,d.constant=Je,d.countBy=si,d.create=gn,d.createCallback=Qe,d.curry=We,d.debounce=Ie,d.defaults=oi,d.defer=Ne,d.delay=Fe,d.difference=he,d.filter=Vn,d.flatten=me,d.forEach=Xn,d.forEachRight=Yn,d.forIn=ui,d.forInRight=bn,d.forOwn=li,d.forOwnRight=_n,d.functions=En,d.groupBy=fi,d.indexBy=pi,d.initial=be,d.intersection=_e,d.invert=xn,d.invoke=Zn,d.keys=ti,d.map=te,d.mapValues=Dn,d.max=ne,d.memoize=$e,d.merge=Wn,d.min=ee,d.omit=In,d.once=qe,d.pairs=Nn,d.partial=Ge,d.partialRight=Ke,d.pick=Fn,d.pluck=hi,d.property=er,d.pull=xe,d.range=Te,d.reject=ae,d.remove=Re,d.rest=He,d.shuffle=ue,d.sortBy=se,d.tap=sr,d.throttle=Ue,d.times=or,d.toArray=fe,d.transform=$n,d.union=Ce,d.uniq=je,d.values=qn,d.where=di,d.without=Be,d.wrap=Ve,d.xor=Le,d.zip=Pe,d.zipObject=Se,d.collect=te,d.drop=He,d.each=Xn,d.eachRight=Yn,d.extend=ai,d.methods=En,d.object=Se,d.select=Vn,d.tail=He,d.unique=je,d.unzip=Pe,Ze(d),d.clone=dn,d.cloneDeep=vn,d.contains=Kn,d.escape=Xe,d.every=Un,d.find=Jn,d.findIndex=de,d.findKey=mn,d.findLast=Qn,d.findLastIndex=ve,d.findLastKey=yn,d.has=wn,d.identity=Ye,d.indexOf=ye,d.isArguments=hn,d.isArray=Yr,d.isBoolean=Tn,d.isDate=Rn,d.isElement=Hn,d.isEmpty=kn,d.isEqual=Cn,d.isFinite=jn,d.isFunction=Bn,d.isNaN=Pn,d.isNull=Sn,d.isNumber=An,d.isObject=Ln,d.isPlainObject=ci,d.isRegExp=Mn,d.isString=zn,d.isUndefined=On,d.lastIndexOf=we,d.mixin=Ze,d.noConflict=tr,d.noop=nr,d.now=vi,d.parseInt=gi,d.random=rr,d.reduce=re,d.reduceRight=ie,d.result=ir,d.runInContext=p,d.size=le,d.some=ce,d.sortedIndex=ke,d.template=ar,d.unescape=ur,d.uniqueId=lr,d.all=Un,d.any=ce,d.detect=Jn,d.findWhere=Jn,d.foldl=re,d.foldr=ie,d.include=Kn,d.inject=re,Ze(function(){var t={};return li(d,function(n,e){d.prototype[e]||(t[e]=n)}),t}(),!1),d.first=ge,d.last=Ee,d.sample=oe,d.take=ge,d.head=ge,li(d,function(t,n){var e="sample"!==n;d.prototype[n]||(d.prototype[n]=function(n,r){var i=this.__chain__,a=t(this.__wrapped__,n,r);return i||null!=n&&(!r||e&&"function"==typeof n)?new v(a,i):a})}),d.VERSION="2.4.1",d.prototype.chain=fr,d.prototype.toString=pr,d.prototype.value=hr,d.prototype.valueOf=hr,Xn(["join","pop","shift"],function(t){var n=Tr[t];d.prototype[t]=function(){var t=this.__chain__,e=n.apply(this.__wrapped__,arguments);return t?new v(e,t):e}}),Xn(["push","reverse","sort","unshift"],function(t){var n=Tr[t];d.prototype[t]=function(){return n.apply(this.__wrapped__,arguments),this}}),Xn(["concat","slice","splice"],function(t){var n=Tr[t];d.prototype[t]=function(){return new v(n.apply(this.__wrapped__,arguments),this.__chain__)}}),d}var h,d=[],v=[],g=0,m=+new Date+"",y=75,b=40,_=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",E=/\b__p \+= '';/g,w=/\b(__p \+=) '' \+/g,x=/(__e\(.*?\)|\b__t\)) \+\n'';/g,T=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,R=/\w*$/,H=/^\s*function[ \n\r\t]+\w/,k=/<%=([\s\S]+?)%>/g,C=RegExp("^["+_+"]*0+(?=.$)"),j=/($^)/,B=/\bthis\b/,L=/['\n\r\t\u2028\u2029\\]/g,P=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],S=0,A="[object Arguments]",M="[object Array]",z="[object Boolean]",O="[object Date]",D="[object Function]",W="[object Number]",I="[object Object]",N="[object RegExp]",F="[object String]",$={};$[D]=!1,$[A]=$[M]=$[z]=$[O]=$[W]=$[I]=$[N]=$[F]=!0;var q={leading:!1,maxWait:0,trailing:!1},G={configurable:!1,enumerable:!1,value:null,writable:!1},K={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},U={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},V=K[typeof window]&&window||this,J=K[typeof exports]&&exports&&!exports.nodeType&&exports,Q=K[typeof module]&&module&&!module.nodeType&&module,X=Q&&Q.exports===J&&J,Y=K[typeof global]&&global;!Y||Y.global!==Y&&Y.window!==Y||(V=Y);var Z=p();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(V._=Z,define(function(){return Z})):J&&Q?X?(Q.exports=Z)._=Z:J._=Z:V._=Z}).call(this),THREE.Bootstrap=function(t){if(!(this instanceof THREE.Bootstrap))return new THREE.Bootstrap(t);var n={init:!0,element:document.body,plugins:["core"],klass:THREE.WebGLRenderer,parameters:{depth:!0,stencil:!0,preserveDrawingBuffer:!0,antialias:!0},plugindb:THREE.Bootstrap.Plugins||{},aliasdb:THREE.Bootstrap.Aliases||{}};this.__options=_.defaults(t||{},n),this.__options.parameters=_.defaults(this.__options.parameters,n.parameters),this.__inited=!1,this.__destroyed=!1,this.plugins={},this.__options.init&&this.init()},THREE.Bootstrap.prototype={init:function(){function t(t){for(var n=1024;n-->0;){var e=!1,i=[];if(_.each(t,function(t){r[t]?(i=i.concat(r[t]),e=!0):i.push(t)}),!e)return i;t=i}throw"Plug-in alias recursion detected"}if(!this.__inited){this.__inited=!0;var n=this.__options,e=n.plugindb,r=n.aliasdb,i=n.element,a=t(n.plugins),o=this.renderer=new n.klass(n.parameters);return this.canvas=o.domElement,this.element=i,i.appendChild(o.domElement),_.each(a,function(t){var r=e[t];if(r){if(this.plugins[t])throw"Duplicate plugin '"+t+"'";var a=new r(n[t]||{});this.plugins[t]=a,_.extend(this,a.install(this,o,i)||{})}}.bind(this)),this.dispatchEvent({type:"ready"}),this}},destroy:function(){if(this.__inited&&!this.__destroyed){this.__destroyed=!0;var t=this.__options,n=this.renderer,e=t.element;return _.each(this.plugins,function(t){t.uninstall(this,n,e)}.bind(this)),this.plugins={},e.removeChild(n.domElement),this.renderer=null,this}}},THREE.EventDispatcher.prototype.apply(THREE.Bootstrap.prototype),THREE.Bootstrap.prototype.onceEventListener=function(t,n){var e=function(r){this.removeEventListener(t,e),n(r)}.bind(this);this.addEventListener(t,e)},THREE.Bootstrap.Plugins={},THREE.Bootstrap.Aliases={},THREE.Bootstrap.Plugin=function(t){this.options=_.defaults(t||{},this.defaults)},THREE.Bootstrap.Plugin.prototype={defaults:{},install:function(){},uninstall:function(){},set:function(t){_.extend(this.options,t),this.dispatchEvent({type:"change",changes:t})},get:function(){return this.options},api:function(t){return t=t||{},t.set=this.set.bind(this),t.get=this.get.bind(this),t}},THREE.EventDispatcher.prototype.apply(THREE.Bootstrap.Plugin.prototype),THREE.Bootstrap.registerPlugin=function(t,n){var e=function(t){THREE.Bootstrap.Plugin.call(this,t)};e.prototype=_.extend(new THREE.Bootstrap.Plugin,n),THREE.Bootstrap.Plugins[t]=e},THREE.Bootstrap.unregisterPlugin=function(t){delete THREE.Bootstrap.Plugins[t]},THREE.Bootstrap.registerAlias=function(t,n){THREE.Bootstrap.Aliases[t]=n},THREE.Bootstrap.unregisterAlias=function(t){delete THREE.Bootstrap.Aliases[t]},THREE.Bootstrap.registerAlias("empty",["size","fill","loop","time"]),THREE.Bootstrap.registerAlias("core",["empty","scene","camera","render"]),THREE.Bootstrap.registerPlugin("size",{defaults:{width:null,height:null,aspect:null,scale:1,capWidth:1/0,capHeight:1/0},install:function(t,n,e){this.handler=function(){var r,i,a,o,u,l,c,s,f=this.options,p=0,h=0;r=a=void 0===f.width||null==f.width?e.offsetWidth||e.innerWidth||0:f.width,i=o=void 0===f.height||null==f.height?e.offsetHeight||e.innerHeight||0:f.height,c=r/i,f.aspect&&(f.aspect>c?(i=Math.round(r/f.aspect),h=Math.floor((o-i)/2)):(r=Math.round(i*f.aspect),p=Math.floor((a-r)/2)),c=f.aspect),u=Math.min(r*f.scale,f.capWidth),l=Math.min(i*f.scale,f.capHeight),raspect=u/l,raspect>c?u=Math.round(l*c):l=Math.round(u/c),n.setSize(u,l),s=n.domElement.style,s.width=r+"px",s.height=i+"px",s.marginLeft=p+"px",s.marginTop=h+"px",_.extend(t.Size,{renderWidth:u,renderHeight:l,viewWidth:r,viewHeight:i}),t.dispatchEvent({type:"resize",renderWidth:u,renderHeight:l,viewWidth:r,viewHeight:i})
}.bind(this),window.addEventListener("resize",this.handler),e.addEventListener("resize",this.handler),t.addEventListener("ready",this.handler),t.Size=this.api({renderWidth:0,renderHeight:0,viewWidth:0,viewHeight:0}),this.addEventListener("change",this.handler)},uninstall:function(t,n,e){window.removeEventListener("resize",this.handler),e.removeEventListener("resize",this.handler),t.removeEventListener("ready",this.handler),delete t.Size}}),THREE.Bootstrap.registerPlugin("fill",{install:function(t,n,e){function r(t){var n=t.style.height;return"auto"==n||""==n}function i(t){return t.style.height="100%",t.style.margin=0,t.style.padding=0,t}e==document.body&&(this.applied=[e,document.documentElement].filter(r).map(i))},uninstall:function(){function t(t){return t.style.height="",t.style.margin="",t.style.padding="",t}this.applied&&this.applied.map(t)}}),THREE.Bootstrap.registerPlugin("loop",{defaults:{start:!0},install:function(t){this.three=t,this.running=!1,this.options.start&&t.onceEventListener("ready",this.start.bind(this)),t.Loop=this.api({start:this.start.bind(this),stop:this.stop.bind(this),running:!1})},uninstall:function(){this.stop()},start:function(){if(!this.running){this.three.Loop.running=this.running=!0,this.three.dispatchEvent({type:"start"});var t=function(){this.running&&requestAnimationFrame(t),["pre","update","render","post"].map(function(t){this.three.dispatchEvent({type:t})}.bind(this))}.bind(this);requestAnimationFrame(t)}},stop:function(){this.running&&(this.three.Loop.running=this.running=!1,this.three.dispatchEvent({type:"stop"}))}}),THREE.Bootstrap.registerPlugin("time",{install:function(t){var n=t.Time=this.api({now:0,delta:1/60,average:0,fps:0}),e=0;this.tick=function(){var t=n.now=+new Date/1e3;if(e){var r=n.delta=t-e,i=n.average||r;n.average=i+.1*(r-i),n.fps=1/i}e=t},t.addEventListener("pre",this.tick)},uninstall:function(t){t.removeEventListener("pre",this.tick),delete t.Time}}),THREE.Bootstrap.registerPlugin("scene",{install:function(t){this.scene=new THREE.Scene,t.scene=this.scene},uninstall:function(t){delete t.scene}}),THREE.Bootstrap.registerPlugin("camera",{defaults:{near:.1,far:1e4,type:"perspective",fov:60,aspect:null,left:-1,right:1,bottom:-1,top:1},install:function(t){this.three=t,this.handler=this.resize.bind(this),t.addEventListener("resize",this.handler),t.Camera=this.api(),t.camera=null,this.aspect=1,this.change(),this.addEventListener("change",this.change.bind(this))},uninstall:function(t){t.removeEventListener("resize",this.handler),delete t.Camera,delete t.camera},change:function(){var t=this.options;if(this.camera&&t.type==this.cameraType)["near","far","left","right","top","bottom","fov"].map(function(n){void 0!==t[n]&&(this.camera[n]=t[n])}.bind(this));else switch(t.type){case"perspective":this.camera=new THREE.PerspectiveCamera(t.fov,1,t.near,t.far);break;case"orthographic":this.camera=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far)}this.cameraType=t.type,this.three.camera=this.camera,this.update()},update:function(){var t=this.options;this.camera.aspect=t.aspect||this.aspect,this.camera.updateProjectionMatrix(),this.three.dispatchEvent({type:"camera",camera:this.camera})},resize:function(t){this.aspect=t.viewWidth/Math.max(1,t.viewHeight)||1,this.update()}}),THREE.Bootstrap.registerPlugin("render",{install:function(t,n){this.handler=function(){t.scene&&t.camera&&n.render(t.scene,t.camera)},t.addEventListener("render",this.handler)},uninstall:function(t){t.removeEventListener("render",this.handler)}}),THREE.Stats=function(){var t=Date.now(),n=t,e=0,r=1/0,i=0,a=0,o=1/0,u=0,l=0,c=0,s=document.createElement("div");s.id="stats",s.addEventListener("mousedown",function(t){t.preventDefault(),y(++c%2)},!1),s.style.cssText="width:80px;opacity:0.9;cursor:pointer";var f=document.createElement("div");f.id="fps",f.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",s.appendChild(f);var p=document.createElement("div");p.id="fpsText",p.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",p.innerHTML="FPS",f.appendChild(p);var h=document.createElement("div");for(h.id="fpsGraph",h.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",f.appendChild(h);74>h.children.length;){var d=document.createElement("span");d.style.cssText="width:1px;height:30px;float:left;background-color:#113",h.appendChild(d)}var v=document.createElement("div");v.id="ms",v.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",s.appendChild(v);var g=document.createElement("div");g.id="msText",g.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",g.innerHTML="MS",v.appendChild(g);var m=document.createElement("div");for(m.id="msGraph",m.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",v.appendChild(m);74>m.children.length;)d=document.createElement("span"),d.style.cssText="width:1px;height:30px;float:left;background-color:#131",m.appendChild(d);var y=function(t){switch(c=t){case 0:f.style.display="block",v.style.display="none";break;case 1:f.style.display="none",v.style.display="block"}};return{REVISION:11,domElement:s,setMode:y,begin:function(){t=Date.now()},end:function(){var c=Date.now();e=c-t,r=Math.min(r,e),i=Math.max(i,e),g.textContent=e+" MS ("+r+"-"+i+")";var s=Math.min(30,30-30*(e/200));return m.appendChild(m.firstChild).style.height=s+"px",l++,c>n+1e3&&(a=Math.round(1e3*l/(c-n)),o=Math.min(o,a),u=Math.max(u,a),p.textContent=a+" FPS ("+o+"-"+u+")",s=Math.min(30,30-30*(a/100)),h.appendChild(h.firstChild).style.height=s+"px",n=c,l=0),c},update:function(){t=this.end()}}},THREE.Bootstrap.registerPlugin("stats",{install:function(t){var n=this.stats=new THREE.Stats,e=n.domElement.style;this.begin=n.begin.bind(n),this.end=n.end.bind(n),t.addEventListener("pre",this.begin),t.addEventListener("post",this.end),e.position="absolute",e.top=e.left=0,document.body.appendChild(n.domElement)},uninstall:function(t){t.removeEventListener("pre",this.begin),t.removeEventListener("post",this.end),document.body.removeChild(this.stats.domElement)}});