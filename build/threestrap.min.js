(function(){function t(t,e,n){for(var r=(n||0)-1,i=t?t.length:0;++r<i;)if(t[r]===e)return r;return-1}function e(e,n){var r=typeof n;if(e=e.cache,"boolean"==r||null==n)return e[n]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?n:m+n;return e=(e=e[r])&&e[i],"object"==r?e&&t(e,n)>-1?0:-1:e?0:-1}function n(t){var e=this.cache,n=typeof t;if("boolean"==n||null==t)e[t]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?t:m+t,i=e[n]||(e[n]={});"object"==n?(i[r]||(i[r]=[])).push(t):i[r]=!0}}function r(t){return t.charCodeAt(0)}function i(t,e){for(var n=t.criteria,r=e.criteria,i=-1,a=n.length;++i<a;){var o=n[i],u=r[i];if(o!==u){if(o>u||"undefined"==typeof o)return 1;if(u>o||"undefined"==typeof u)return-1}}return t.index-e.index}function a(t){var e=-1,r=t.length,i=t[0],a=t[r/2|0],o=t[r-1];if(i&&"object"==typeof i&&a&&"object"==typeof a&&o&&"object"==typeof o)return!1;var u=l();u["false"]=u["null"]=u["true"]=u.undefined=!1;var s=l();for(s.array=t,s.cache=u,s.push=n;++e<r;)s.push(t[e]);return s}function o(t){return"\\"+U[t]}function u(){return d.pop()||[]}function l(){return v.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function s(t){t.length=0,d.length<b&&d.push(t)}function c(t){var e=t.cache;e&&c(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,v.length<b&&v.push(t)}function f(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,a=Array(0>i?0:i);++r<i;)a[r]=t[e+r];return a}function p(n){function d(t){return t&&"object"==typeof t&&!Yr(t)&&Ar.call(t,"__wrapped__")?t:new v(t)}function v(t,e){this.__chain__=!!e,this.__wrapped__=t}function b(t){function e(){if(r){var t=f(r);Mr.apply(t,arguments)}if(this instanceof e){var a=J(n.prototype),o=n.apply(a,t||arguments);return Be(o)?o:a}return n.apply(i,t||arguments)}var n=t[0],r=t[2],i=t[4];return Xr(e,t),e}function U(t,e,n,r,i){if(n){var a=n(t);if("undefined"!=typeof a)return a}var o=Be(t);if(!o)return t;var l=kr.call(t);if(!$[l])return t;var c=Jr[l];switch(l){case z:case O:return new c(+t);case W:case F:return new c(t);case N:return a=c(t.source,R.exec(t)),a.lastIndex=t.lastIndex,a}var p=Yr(t);if(e){var h=!r;r||(r=u()),i||(i=u());for(var d=r.length;d--;)if(r[d]==t)return i[d];a=p?c(t.length):{}}else a=p?f(t):ai({},t);return p&&(Ar.call(t,"index")&&(a.index=t.index),Ar.call(t,"input")&&(a.input=t.input)),e?(r.push(t),i.push(a),(p?Qe:li)(t,function(t,o){a[o]=U(t,e,n,r,i)}),h&&(s(r),s(i)),a):a}function J(t){return Be(t)?Ir(t):{}}function Q(t,e,n){if("function"!=typeof t)return Yn;if("undefined"==typeof e||!("prototype"in t))return t;var r=t.__bindData__;if("undefined"==typeof r&&(Qr.funcNames&&(r=!t.name),r=r||!Qr.funcDecomp,!r)){var i=Pr.call(t);Qr.funcNames||(r=!H.test(i)),r||(r=B.test(i),Xr(t,r))}if(r===!1||r!==!0&&1&r[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,a){return t.call(e,n,r,i,a)}}return Mn(t,e)}function X(t){function e(){var t=l?o:this;if(i){var d=f(i);Mr.apply(d,arguments)}if((a||c)&&(d||(d=f(arguments)),a&&Mr.apply(d,a),c&&d.length<u))return r|=16,X([n,p?r:-4&r,d,null,o,u]);if(d||(d=arguments),s&&(n=t[h]),this instanceof e){t=J(n.prototype);var v=n.apply(t,d);return Be(v)?v:t}return n.apply(t,d)}var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],l=1&r,s=2&r,c=4&r,p=8&r,h=n;return Xr(e,t),e}function Y(n,r){var i=-1,o=le(),u=n?n.length:0,l=u>=y&&o===t,s=[];if(l){var f=a(r);f?(o=e,r=f):l=!1}for(;++i<u;){var p=n[i];o(r,p)<0&&s.push(p)}return l&&c(r),s}function te(t,e,n,r){for(var i=(r||0)-1,a=t?t.length:0,o=[];++i<a;){var u=t[i];if(u&&"object"==typeof u&&"number"==typeof u.length&&(Yr(u)||pe(u))){e||(u=te(u,e,n));var l=-1,s=u.length,c=o.length;for(o.length+=s;++l<s;)o[c++]=u[l]}else n||o.push(u)}return o}function ee(t,e,n,r,i,a){if(n){var o=n(t,e);if("undefined"!=typeof o)return!!o}if(t===e)return 0!==t||1/t==1/e;var l=typeof t,c=typeof e;if(!(t!==t||t&&K[l]||e&&K[c]))return!1;if(null==t||null==e)return t===e;var f=kr.call(t),p=kr.call(e);if(f==A&&(f=I),p==A&&(p=I),f!=p)return!1;switch(f){case z:case O:return+t==+e;case W:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case N:case F:return t==wr(e)}var h=f==M;if(!h){var d=Ar.call(t,"__wrapped__"),v=Ar.call(e,"__wrapped__");if(d||v)return ee(d?t.__wrapped__:t,v?e.__wrapped__:e,n,r,i,a);if(f!=I)return!1;var g=t.constructor,m=e.constructor;if(g!=m&&!(je(g)&&g instanceof g&&je(m)&&m instanceof m)&&"constructor"in t&&"constructor"in e)return!1}var y=!i;i||(i=u()),a||(a=u());for(var b=i.length;b--;)if(i[b]==t)return a[b]==e;var _=0;if(o=!0,i.push(t),a.push(e),h){if(b=t.length,_=e.length,o=_==b,o||r)for(;_--;){var E=b,w=e[_];if(r)for(;E--&&!(o=ee(t[E],w,n,r,i,a)););else if(!(o=ee(t[_],w,n,r,i,a)))break}}else ui(e,function(e,u,l){return Ar.call(l,u)?(_++,o=Ar.call(t,u)&&ee(t[u],e,n,r,i,a)):void 0}),o&&!r&&ui(t,function(t,e,n){return Ar.call(n,e)?o=--_>-1:void 0});return i.pop(),a.pop(),y&&(s(i),s(a)),o}function ne(t,e,n,r,i){(Yr(e)?Qe:li)(e,function(e,a){var o,u,l=e,s=t[a];if(e&&((u=Yr(e))||si(e))){for(var c=r.length;c--;)if(o=r[c]==e){s=i[c];break}if(!o){var f;n&&(l=n(s,e),(f="undefined"!=typeof l)&&(s=l)),f||(s=u?Yr(s)?s:[]:si(s)?s:{}),r.push(e),i.push(s),f||ne(s,e,n,r,i)}}else n&&(l=n(s,e),"undefined"==typeof l&&(l=e)),"undefined"!=typeof l&&(s=l);t[a]=s})}function re(t,e){return t+Lr(Vr()*(e-t+1))}function ie(n,r,i){var o=-1,l=le(),f=n?n.length:0,p=[],h=!r&&f>=y&&l===t,d=i||h?u():p;if(h){var v=a(d);l=e,d=v}for(;++o<f;){var g=n[o],m=i?i(g,o,n):g;(r?!o||d[d.length-1]!==m:l(d,m)<0)&&((i||h)&&d.push(m),p.push(g))}return h?(s(d.array),c(d)):i&&s(d),p}function ae(t){return function(e,n,r){var i={};n=d.createCallback(n,r,3);var a=-1,o=e?e.length:0;if("number"==typeof o)for(;++a<o;){var u=e[a];t(i,u,n(u,a,e),e)}else li(e,function(e,r,a){t(i,e,n(e,r,a),a)});return i}}function oe(t,e,n,r,i,a){var o=1&e,u=2&e,l=4&e,s=16&e,c=32&e;if(!u&&!je(t))throw new xr;s&&!n.length&&(e&=-17,s=n=!1),c&&!r.length&&(e&=-33,c=r=!1);var p=t&&t.__bindData__;if(p&&p!==!0)return p=f(p),p[2]&&(p[2]=f(p[2])),p[3]&&(p[3]=f(p[3])),!o||1&p[1]||(p[4]=i),!o&&1&p[1]&&(e|=8),!l||4&p[1]||(p[5]=a),s&&Mr.apply(p[2]||(p[2]=[]),n),c&&Dr.apply(p[3]||(p[3]=[]),r),p[1]|=e,oe.apply(null,p);var h=1==e||17===e?b:X;return h([t,e,n,r,i,a])}function ue(t){return ei[t]}function le(){var e=(e=d.indexOf)===yn?t:e;return e}function se(t){return"function"==typeof t&&Cr.test(t)}function ce(t){var e,n;return t&&kr.call(t)==I&&(e=t.constructor,!je(e)||e instanceof e)?(ui(t,function(t,e){n=e}),"undefined"==typeof n||Ar.call(t,n)):!1}function fe(t){return ni[t]}function pe(t){return t&&"object"==typeof t&&"number"==typeof t.length&&kr.call(t)==A||!1}function he(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=e,e=!1),U(t,e,"function"==typeof n&&Q(n,r,1))}function de(t,e,n){return U(t,!0,"function"==typeof e&&Q(e,n,1))}function ve(t,e){var n=J(t);return e?ai(n,e):n}function ge(t,e,n){var r;return e=d.createCallback(e,n,3),li(t,function(t,n,i){return e(t,n,i)?(r=n,!1):void 0}),r}function me(t,e,n){var r;return e=d.createCallback(e,n,3),be(t,function(t,n,i){return e(t,n,i)?(r=n,!1):void 0}),r}function ye(t,e,n){var r=[];ui(t,function(t,e){r.push(e,t)});var i=r.length;for(e=Q(e,n,3);i--&&e(r[i--],r[i],t)!==!1;);return t}function be(t,e,n){var r=ti(t),i=r.length;for(e=Q(e,n,3);i--;){var a=r[i];if(e(t[a],a,t)===!1)break}return t}function _e(t){var e=[];return ui(t,function(t,n){je(t)&&e.push(n)}),e.sort()}function Ee(t,e){return t?Ar.call(t,e):!1}function we(t){for(var e=-1,n=ti(t),r=n.length,i={};++e<r;){var a=n[e];i[t[a]]=a}return i}function xe(t){return t===!0||t===!1||t&&"object"==typeof t&&kr.call(t)==z||!1}function Te(t){return t&&"object"==typeof t&&kr.call(t)==O||!1}function Re(t){return t&&1===t.nodeType||!1}function He(t){var e=!0;if(!t)return e;var n=kr.call(t),r=t.length;return n==M||n==F||n==A||n==I&&"number"==typeof r&&je(t.splice)?!r:(li(t,function(){return e=!1}),e)}function ke(t,e,n,r){return ee(t,e,"function"==typeof n&&Q(n,r,2))}function Ce(t){return Fr(t)&&!$r(parseFloat(t))}function je(t){return"function"==typeof t}function Be(t){return!(!t||!K[typeof t])}function Le(t){return Se(t)&&t!=+t}function Pe(t){return null===t}function Se(t){return"number"==typeof t||t&&"object"==typeof t&&kr.call(t)==W||!1}function Ae(t){return t&&"object"==typeof t&&kr.call(t)==N||!1}function Me(t){return"string"==typeof t||t&&"object"==typeof t&&kr.call(t)==F||!1}function ze(t){return"undefined"==typeof t}function Oe(t,e,n){var r={};return e=d.createCallback(e,n,3),li(t,function(t,n,i){r[n]=e(t,n,i)}),r}function De(t){var e=arguments,n=2;if(!Be(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var r=Q(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(r=e[--n]);for(var i=f(arguments,1,n),a=-1,o=u(),l=u();++a<n;)ne(t,i[a],r,o,l);return s(o),s(l),t}function We(t,e,n){var r={};if("function"!=typeof e){var i=[];ui(t,function(t,e){i.push(e)}),i=Y(i,te(arguments,!0,!1,1));for(var a=-1,o=i.length;++a<o;){var u=i[a];r[u]=t[u]}}else e=d.createCallback(e,n,3),ui(t,function(t,n,i){e(t,n,i)||(r[n]=t)});return r}function Ie(t){for(var e=-1,n=ti(t),r=n.length,i=dr(r);++e<r;){var a=n[e];i[e]=[a,t[a]]}return i}function Ne(t,e,n){var r={};if("function"!=typeof e)for(var i=-1,a=te(arguments,!0,!1,1),o=Be(t)?a.length:0;++i<o;){var u=a[i];u in t&&(r[u]=t[u])}else e=d.createCallback(e,n,3),ui(t,function(t,n,i){e(t,n,i)&&(r[n]=t)});return r}function Fe(t,e,n,r){var i=Yr(t);if(null==n)if(i)n=[];else{var a=t&&t.constructor,o=a&&a.prototype;n=J(o)}return e&&(e=d.createCallback(e,r,4),(i?Qe:li)(t,function(t,r,i){return e(n,t,r,i)})),n}function $e(t){for(var e=-1,n=ti(t),r=n.length,i=dr(r);++e<r;)i[e]=t[n[e]];return i}function qe(t){for(var e=arguments,n=-1,r=te(e,!0,!1,1),i=e[2]&&e[2][e[1]]===t?1:r.length,a=dr(i);++n<i;)a[n]=t[r[n]];return a}function Ge(t,e,n){var r=-1,i=le(),a=t?t.length:0,o=!1;return n=(0>n?Gr(0,a+n):n)||0,Yr(t)?o=i(t,e,n)>-1:"number"==typeof a?o=(Me(t)?t.indexOf(e,n):i(t,e,n))>-1:li(t,function(t){return++r>=n?!(o=t===e):void 0}),o}function Ke(t,e,n){var r=!0;e=d.createCallback(e,n,3);var i=-1,a=t?t.length:0;if("number"==typeof a)for(;++i<a&&(r=!!e(t[i],i,t)););else li(t,function(t,n,i){return r=!!e(t,n,i)});return r}function Ue(t,e,n){var r=[];e=d.createCallback(e,n,3);var i=-1,a=t?t.length:0;if("number"==typeof a)for(;++i<a;){var o=t[i];e(o,i,t)&&r.push(o)}else li(t,function(t,n,i){e(t,n,i)&&r.push(t)});return r}function Ve(t,e,n){e=d.createCallback(e,n,3);var r=-1,i=t?t.length:0;if("number"!=typeof i){var a;return li(t,function(t,n,r){return e(t,n,r)?(a=t,!1):void 0}),a}for(;++r<i;){var o=t[r];if(e(o,r,t))return o}}function Je(t,e,n){var r;return e=d.createCallback(e,n,3),Xe(t,function(t,n,i){return e(t,n,i)?(r=t,!1):void 0}),r}function Qe(t,e,n){var r=-1,i=t?t.length:0;if(e=e&&"undefined"==typeof n?e:Q(e,n,3),"number"==typeof i)for(;++r<i&&e(t[r],r,t)!==!1;);else li(t,e);return t}function Xe(t,e,n){var r=t?t.length:0;if(e=e&&"undefined"==typeof n?e:Q(e,n,3),"number"==typeof r)for(;r--&&e(t[r],r,t)!==!1;);else{var i=ti(t);r=i.length,li(t,function(t,n,a){return n=i?i[--r]:--r,e(a[n],n,a)})}return t}function Ye(t,e){var n=f(arguments,2),r=-1,i="function"==typeof e,a=t?t.length:0,o=dr("number"==typeof a?a:0);return Qe(t,function(t){o[++r]=(i?e:t[e]).apply(t,n)}),o}function Ze(t,e,n){var r=-1,i=t?t.length:0;if(e=d.createCallback(e,n,3),"number"==typeof i)for(var a=dr(i);++r<i;)a[r]=e(t[r],r,t);else a=[],li(t,function(t,n,i){a[++r]=e(t,n,i)});return a}function tn(t,e,n){var i=-1/0,a=i;if("function"!=typeof e&&n&&n[e]===t&&(e=null),null==e&&Yr(t))for(var o=-1,u=t.length;++o<u;){var l=t[o];l>a&&(a=l)}else e=null==e&&Me(t)?r:d.createCallback(e,n,3),Qe(t,function(t,n,r){var o=e(t,n,r);o>i&&(i=o,a=t)});return a}function en(t,e,n){var i=1/0,a=i;if("function"!=typeof e&&n&&n[e]===t&&(e=null),null==e&&Yr(t))for(var o=-1,u=t.length;++o<u;){var l=t[o];a>l&&(a=l)}else e=null==e&&Me(t)?r:d.createCallback(e,n,3),Qe(t,function(t,n,r){var o=e(t,n,r);i>o&&(i=o,a=t)});return a}function nn(t,e,n,r){if(!t)return n;var i=arguments.length<3;e=d.createCallback(e,r,4);var a=-1,o=t.length;if("number"==typeof o)for(i&&(n=t[++a]);++a<o;)n=e(n,t[a],a,t);else li(t,function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)});return n}function rn(t,e,n,r){var i=arguments.length<3;return e=d.createCallback(e,r,4),Xe(t,function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)}),n}function an(t,e,n){return e=d.createCallback(e,n,3),Ue(t,function(t,n,r){return!e(t,n,r)})}function on(t,e,n){if(t&&"number"!=typeof t.length&&(t=$e(t)),null==e||n)return t?t[re(0,t.length-1)]:h;var r=un(t);return r.length=Kr(Gr(0,e),r.length),r}function un(t){var e=-1,n=t?t.length:0,r=dr("number"==typeof n?n:0);return Qe(t,function(t){var n=re(0,++e);r[e]=r[n],r[n]=t}),r}function ln(t){var e=t?t.length:0;return"number"==typeof e?e:ti(t).length}function sn(t,e,n){var r;e=d.createCallback(e,n,3);var i=-1,a=t?t.length:0;if("number"==typeof a)for(;++i<a&&!(r=e(t[i],i,t)););else li(t,function(t,n,i){return!(r=e(t,n,i))});return!!r}function cn(t,e,n){var r=-1,a=Yr(e),o=t?t.length:0,f=dr("number"==typeof o?o:0);for(a||(e=d.createCallback(e,n,3)),Qe(t,function(t,n,i){var o=f[++r]=l();a?o.criteria=Ze(e,function(e){return t[e]}):(o.criteria=u())[0]=e(t,n,i),o.index=r,o.value=t}),o=f.length,f.sort(i);o--;){var p=f[o];f[o]=p.value,a||s(p.criteria),c(p)}return f}function fn(t){return t&&"number"==typeof t.length?f(t):$e(t)}function pn(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r}function hn(t){return Y(t,te(arguments,!0,!0,1))}function dn(t,e,n){var r=-1,i=t?t.length:0;for(e=d.createCallback(e,n,3);++r<i;)if(e(t[r],r,t))return r;return-1}function vn(t,e,n){var r=t?t.length:0;for(e=d.createCallback(e,n,3);r--;)if(e(t[r],r,t))return r;return-1}function gn(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var a=-1;for(e=d.createCallback(e,n,3);++a<i&&e(t[a],a,t);)r++}else if(r=e,null==r||n)return t?t[0]:h;return f(t,0,Kr(Gr(0,r),i))}function mn(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n="function"!=typeof e&&r&&r[e]===t?null:e,e=!1),null!=n&&(t=Ze(t,n,r)),te(t,e)}function yn(e,n,r){if("number"==typeof r){var i=e?e.length:0;r=0>r?Gr(0,i+r):r||0}else if(r){var a=kn(e,n);return e[a]===n?a:-1}return t(e,n,r)}function bn(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var a=i;for(e=d.createCallback(e,n,3);a--&&e(t[a],a,t);)r++}else r=null==e||n?1:e||r;return f(t,0,Kr(Gr(0,i-r),i))}function _n(){for(var n=[],r=-1,i=arguments.length,o=u(),l=le(),f=l===t,p=u();++r<i;){var h=arguments[r];(Yr(h)||pe(h))&&(n.push(h),o.push(f&&h.length>=y&&a(r?n[r]:p)))}var d=n[0],v=-1,g=d?d.length:0,m=[];t:for(;++v<g;){var b=o[0];if(h=d[v],(b?e(b,h):l(p,h))<0){for(r=i,(b||p).push(h);--r;)if(b=o[r],(b?e(b,h):l(n[r],h))<0)continue t;m.push(h)}}for(;i--;)b=o[i],b&&c(b);return s(o),s(p),m}function En(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var a=i;for(e=d.createCallback(e,n,3);a--&&e(t[a],a,t);)r++}else if(r=e,null==r||n)return t?t[i-1]:h;return f(t,Gr(0,i-r))}function wn(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(0>n?Gr(0,r+n):Kr(n,r-1))+1);r--;)if(t[r]===e)return r;return-1}function xn(t){for(var e=arguments,n=0,r=e.length,i=t?t.length:0;++n<r;)for(var a=-1,o=e[n];++a<i;)t[a]===o&&(Or.call(t,a--,1),i--);return t}function Tn(t,e,n){t=+t||0,n="number"==typeof n?n:+n||1,null==e&&(e=t,t=0);for(var r=-1,i=Gr(0,jr((e-t)/(n||1))),a=dr(i);++r<i;)a[r]=t,t+=n;return a}function Rn(t,e,n){var r=-1,i=t?t.length:0,a=[];for(e=d.createCallback(e,n,3);++r<i;){var o=t[r];e(o,r,t)&&(a.push(o),Or.call(t,r--,1),i--)}return a}function Hn(t,e,n){if("number"!=typeof e&&null!=e){var r=0,i=-1,a=t?t.length:0;for(e=d.createCallback(e,n,3);++i<a&&e(t[i],i,t);)r++}else r=null==e||n?1:Gr(0,e);return f(t,r)}function kn(t,e,n,r){var i=0,a=t?t.length:i;for(n=n?d.createCallback(n,r,1):Yn,e=n(e);a>i;){var o=i+a>>>1;n(t[o])<e?i=o+1:a=o}return i}function Cn(){return ie(te(arguments,!0,!0))}function jn(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n="function"!=typeof e&&r&&r[e]===t?null:e,e=!1),null!=n&&(n=d.createCallback(n,r,3)),ie(t,e,n)}function Bn(t){return Y(t,f(arguments,1))}function Ln(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Yr(n)||pe(n))var r=r?ie(Y(r,n).concat(Y(n,r))):n}return r||[]}function Pn(){for(var t=arguments.length>1?arguments:arguments[0],e=-1,n=t?tn(hi(t,"length")):0,r=dr(0>n?0:n);++e<n;)r[e]=hi(t,e);return r}function Sn(t,e){var n=-1,r=t?t.length:0,i={};for(e||!r||Yr(t[0])||(e=[]);++n<r;){var a=t[n];e?i[a]=e[n]:a&&(i[a[0]]=a[1])}return i}function An(t,e){if(!je(e))throw new xr;return function(){return--t<1?e.apply(this,arguments):void 0}}function Mn(t,e){return arguments.length>2?oe(t,17,f(arguments,2),null,e):oe(t,1,null,null,e)}function zn(t){for(var e=arguments.length>1?te(arguments,!0,!1,1):_e(t),n=-1,r=e.length;++n<r;){var i=e[n];t[i]=oe(t[i],1,null,null,t)}return t}function On(t,e){return arguments.length>2?oe(e,19,f(arguments,2),null,t):oe(e,3,null,null,t)}function Dn(){for(var t=arguments,e=t.length;e--;)if(!je(t[e]))throw new xr;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function Wn(t,e){return e="number"==typeof e?e:+e||t.length,oe(t,4,null,null,null,e)}function In(t,e,n){var r,i,a,o,u,l,s,c=0,f=!1,p=!0;if(!je(t))throw new xr;if(e=Gr(0,e)||0,n===!0){var d=!0;p=!1}else Be(n)&&(d=n.leading,f="maxWait"in n&&(Gr(e,n.maxWait)||0),p="trailing"in n?n.trailing:p);var v=function(){var n=e-(vi()-o);if(0>=n){i&&Br(i);var f=s;i=l=s=h,f&&(c=vi(),a=t.apply(u,r),l||i||(r=u=null))}else l=zr(v,n)},g=function(){l&&Br(l),i=l=s=h,(p||f!==e)&&(c=vi(),a=t.apply(u,r),l||i||(r=u=null))};return function(){if(r=arguments,o=vi(),u=this,s=p&&(l||!d),f===!1)var n=d&&!l;else{i||d||(c=o);var h=f-(o-c),m=0>=h;m?(i&&(i=Br(i)),c=o,a=t.apply(u,r)):i||(i=zr(g,h))}return m&&l?l=Br(l):l||e===f||(l=zr(v,e)),n&&(m=!0,a=t.apply(u,r)),!m||l||i||(r=u=null),a}}function Nn(t){if(!je(t))throw new xr;var e=f(arguments,1);return zr(function(){t.apply(h,e)},1)}function Fn(t,e){if(!je(t))throw new xr;var n=f(arguments,2);return zr(function(){t.apply(h,n)},e)}function $n(t,e){if(!je(t))throw new xr;var n=function(){var r=n.cache,i=e?e.apply(this,arguments):m+arguments[0];return Ar.call(r,i)?r[i]:r[i]=t.apply(this,arguments)};return n.cache={},n}function qn(t){var e,n;if(!je(t))throw new xr;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Gn(t){return oe(t,16,f(arguments,1))}function Kn(t){return oe(t,32,null,f(arguments,1))}function Un(t,e,n){var r=!0,i=!0;if(!je(t))throw new xr;return n===!1?r=!1:Be(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),q.leading=r,q.maxWait=e,q.trailing=i,In(t,e,q)}function Vn(t,e){return oe(e,16,[t])}function Jn(t){return function(){return t}}function Qn(t,e,n){var r=typeof t;if(null==t||"function"==r)return Q(t,e,n);if("object"!=r)return nr(t);var i=ti(t),a=i[0],o=t[a];return 1!=i.length||o!==o||Be(o)?function(e){for(var n=i.length,r=!1;n--&&(r=ee(e[i[n]],t[i[n]],null,!0)););return r}:function(t){var e=t[a];return o===e&&(0!==o||1/o==1/e)}}function Xn(t){return null==t?"":wr(t).replace(ii,ue)}function Yn(t){return t}function Zn(t,e,n){var r=!0,i=e&&_e(e);e&&(n||i.length)||(null==n&&(n=e),a=v,e=t,t=d,i=_e(e)),n===!1?r=!1:Be(n)&&"chain"in n&&(r=n.chain);var a=t,o=je(a);Qe(i,function(n){var i=t[n]=e[n];o&&(a.prototype[n]=function(){var e=this.__chain__,n=this.__wrapped__,o=[n];Mr.apply(o,arguments);var u=i.apply(t,o);if(r||e){if(n===u&&Be(u))return this;u=new a(u),u.__chain__=e}return u})})}function tr(){return n._=Hr,this}function er(){}function nr(t){return function(e){return e[t]}}function rr(t,e,n){var r=null==t,i=null==e;if(null==n&&("boolean"==typeof t&&i?(n=t,t=1):i||"boolean"!=typeof e||(n=e,i=!0)),r&&i&&(e=1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var a=Vr();return Kr(t+a*(e-t+parseFloat("1e-"+((a+"").length-1))),e)}return re(t,e)}function ir(t,e){if(t){var n=t[e];return je(n)?t[e]():n}}function ar(t,e,n){var r=d.templateSettings;t=wr(t||""),n=oi({},n,r);var i,a=oi({},n.imports,r.imports),u=ti(a),l=$e(a),s=0,c=n.interpolate||j,f="__p += '",p=Er((n.escape||j).source+"|"+c.source+"|"+(c===k?T:j).source+"|"+(n.evaluate||j).source+"|$","g");t.replace(p,function(e,n,r,a,u,l){return r||(r=a),f+=t.slice(s,l).replace(L,o),n&&(f+="' +\n__e("+n+") +\n'"),u&&(i=!0,f+="';\n"+u+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),s=l+e.length,e}),f+="';\n";var v=n.variable,g=v;g||(v="obj",f="with ("+v+") {\n"+f+"\n}\n"),f=(i?f.replace(E,""):f).replace(w,"$1").replace(x,"$1;"),f="function("+v+") {\n"+(g?"":v+" || ("+v+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+S++ +"]")+"\n*/";try{var y=mr(u,"return "+f+m).apply(h,l)}catch(b){throw b.source=f,b}return e?y(e):(y.source=f,y)}function or(t,e,n){t=(t=+t)>-1?t:0;var r=-1,i=dr(t);for(e=Q(e,n,1);++r<t;)i[r]=e(r);return i}function ur(t){return null==t?"":wr(t).replace(ri,fe)}function lr(t){var e=++g;return wr(null==t?"":t)+e}function sr(t){return t=new v(t),t.__chain__=!0,t}function cr(t,e){return e(t),t}function fr(){return this.__chain__=!0,this}function pr(){return wr(this.__wrapped__)}function hr(){return this.__wrapped__}n=n?Z.defaults(V.Object(),n,Z.pick(V,P)):V;var dr=n.Array,vr=n.Boolean,gr=n.Date,mr=n.Function,yr=n.Math,br=n.Number,_r=n.Object,Er=n.RegExp,wr=n.String,xr=n.TypeError,Tr=[],Rr=_r.prototype,Hr=n._,kr=Rr.toString,Cr=Er("^"+wr(kr).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),jr=yr.ceil,Br=n.clearTimeout,Lr=yr.floor,Pr=mr.prototype.toString,Sr=se(Sr=_r.getPrototypeOf)&&Sr,Ar=Rr.hasOwnProperty,Mr=Tr.push,zr=n.setTimeout,Or=Tr.splice,Dr=Tr.unshift,Wr=function(){try{var t={},e=se(e=_r.defineProperty)&&e,n=e(t,t,t)&&e}catch(r){}return n}(),Ir=se(Ir=_r.create)&&Ir,Nr=se(Nr=dr.isArray)&&Nr,Fr=n.isFinite,$r=n.isNaN,qr=se(qr=_r.keys)&&qr,Gr=yr.max,Kr=yr.min,Ur=n.parseInt,Vr=yr.random,Jr={};Jr[M]=dr,Jr[z]=vr,Jr[O]=gr,Jr[D]=mr,Jr[I]=_r,Jr[W]=br,Jr[N]=Er,Jr[F]=wr,v.prototype=d.prototype;var Qr=d.support={};Qr.funcDecomp=!se(n.WinRTError)&&B.test(p),Qr.funcNames="string"==typeof mr.name,d.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:k,variable:"",imports:{_:d}},Ir||(J=function(){function t(){}return function(e){if(Be(e)){t.prototype=e;var r=new t;t.prototype=null}return r||n.Object()}}());var Xr=Wr?function(t,e){G.value=e,Wr(t,"__bindData__",G)}:er,Yr=Nr||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&kr.call(t)==M||!1},Zr=function(t){var e,n=t,r=[];if(!n)return r;if(!K[typeof t])return r;for(e in n)Ar.call(n,e)&&r.push(e);return r},ti=qr?function(t){return Be(t)?qr(t):[]}:Zr,ei={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ni=we(ei),ri=Er("("+ti(ni).join("|")+")","g"),ii=Er("["+ti(ei).join("")+"]","g"),ai=function(t,e,n){var r,i=t,a=i;if(!i)return a;var o=arguments,u=0,l="number"==typeof n?2:o.length;if(l>3&&"function"==typeof o[l-2])var s=Q(o[--l-1],o[l--],2);else l>2&&"function"==typeof o[l-1]&&(s=o[--l]);for(;++u<l;)if(i=o[u],i&&K[typeof i])for(var c=-1,f=K[typeof i]&&ti(i),p=f?f.length:0;++c<p;)r=f[c],a[r]=s?s(a[r],i[r]):i[r];return a},oi=function(t,e,n){var r,i=t,a=i;if(!i)return a;for(var o=arguments,u=0,l="number"==typeof n?2:o.length;++u<l;)if(i=o[u],i&&K[typeof i])for(var s=-1,c=K[typeof i]&&ti(i),f=c?c.length:0;++s<f;)r=c[s],"undefined"==typeof a[r]&&(a[r]=i[r]);return a},ui=function(t,e,n){var r,i=t,a=i;if(!i)return a;if(!K[typeof i])return a;e=e&&"undefined"==typeof n?e:Q(e,n,3);for(r in i)if(e(i[r],r,t)===!1)return a;return a},li=function(t,e,n){var r,i=t,a=i;if(!i)return a;if(!K[typeof i])return a;e=e&&"undefined"==typeof n?e:Q(e,n,3);for(var o=-1,u=K[typeof i]&&ti(i),l=u?u.length:0;++o<l;)if(r=u[o],e(i[r],r,t)===!1)return a;return a},si=Sr?function(t){if(!t||kr.call(t)!=I)return!1;var e=t.valueOf,n=se(e)&&(n=Sr(e))&&Sr(n);return n?t==n||Sr(t)==n:ce(t)}:ce,ci=ae(function(t,e,n){Ar.call(t,n)?t[n]++:t[n]=1}),fi=ae(function(t,e,n){(Ar.call(t,n)?t[n]:t[n]=[]).push(e)}),pi=ae(function(t,e,n){t[n]=e}),hi=Ze,di=Ue,vi=se(vi=gr.now)&&vi||function(){return(new gr).getTime()},gi=8==Ur(_+"08")?Ur:function(t,e){return Ur(Me(t)?t.replace(C,""):t,e||0)};return d.after=An,d.assign=ai,d.at=qe,d.bind=Mn,d.bindAll=zn,d.bindKey=On,d.chain=sr,d.compact=pn,d.compose=Dn,d.constant=Jn,d.countBy=ci,d.create=ve,d.createCallback=Qn,d.curry=Wn,d.debounce=In,d.defaults=oi,d.defer=Nn,d.delay=Fn,d.difference=hn,d.filter=Ue,d.flatten=mn,d.forEach=Qe,d.forEachRight=Xe,d.forIn=ui,d.forInRight=ye,d.forOwn=li,d.forOwnRight=be,d.functions=_e,d.groupBy=fi,d.indexBy=pi,d.initial=bn,d.intersection=_n,d.invert=we,d.invoke=Ye,d.keys=ti,d.map=Ze,d.mapValues=Oe,d.max=tn,d.memoize=$n,d.merge=De,d.min=en,d.omit=We,d.once=qn,d.pairs=Ie,d.partial=Gn,d.partialRight=Kn,d.pick=Ne,d.pluck=hi,d.property=nr,d.pull=xn,d.range=Tn,d.reject=an,d.remove=Rn,d.rest=Hn,d.shuffle=un,d.sortBy=cn,d.tap=cr,d.throttle=Un,d.times=or,d.toArray=fn,d.transform=Fe,d.union=Cn,d.uniq=jn,d.values=$e,d.where=di,d.without=Bn,d.wrap=Vn,d.xor=Ln,d.zip=Pn,d.zipObject=Sn,d.collect=Ze,d.drop=Hn,d.each=Qe,d.eachRight=Xe,d.extend=ai,d.methods=_e,d.object=Sn,d.select=Ue,d.tail=Hn,d.unique=jn,d.unzip=Pn,Zn(d),d.clone=he,d.cloneDeep=de,d.contains=Ge,d.escape=Xn,d.every=Ke,d.find=Ve,d.findIndex=dn,d.findKey=ge,d.findLast=Je,d.findLastIndex=vn,d.findLastKey=me,d.has=Ee,d.identity=Yn,d.indexOf=yn,d.isArguments=pe,d.isArray=Yr,d.isBoolean=xe,d.isDate=Te,d.isElement=Re,d.isEmpty=He,d.isEqual=ke,d.isFinite=Ce,d.isFunction=je,d.isNaN=Le,d.isNull=Pe,d.isNumber=Se,d.isObject=Be,d.isPlainObject=si,d.isRegExp=Ae,d.isString=Me,d.isUndefined=ze,d.lastIndexOf=wn,d.mixin=Zn,d.noConflict=tr,d.noop=er,d.now=vi,d.parseInt=gi,d.random=rr,d.reduce=nn,d.reduceRight=rn,d.result=ir,d.runInContext=p,d.size=ln,d.some=sn,d.sortedIndex=kn,d.template=ar,d.unescape=ur,d.uniqueId=lr,d.all=Ke,d.any=sn,d.detect=Ve,d.findWhere=Ve,d.foldl=nn,d.foldr=rn,d.include=Ge,d.inject=nn,Zn(function(){var t={};return li(d,function(e,n){d.prototype[n]||(t[n]=e)}),t}(),!1),d.first=gn,d.last=En,d.sample=on,d.take=gn,d.head=gn,li(d,function(t,e){var n="sample"!==e;d.prototype[e]||(d.prototype[e]=function(e,r){var i=this.__chain__,a=t(this.__wrapped__,e,r);return i||null!=e&&(!r||n&&"function"==typeof e)?new v(a,i):a})}),d.VERSION="2.4.1",d.prototype.chain=fr,d.prototype.toString=pr,d.prototype.value=hr,d.prototype.valueOf=hr,Qe(["join","pop","shift"],function(t){var e=Tr[t];d.prototype[t]=function(){var t=this.__chain__,n=e.apply(this.__wrapped__,arguments);return t?new v(n,t):n}}),Qe(["push","reverse","sort","unshift"],function(t){var e=Tr[t];d.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),Qe(["concat","slice","splice"],function(t){var e=Tr[t];d.prototype[t]=function(){return new v(e.apply(this.__wrapped__,arguments),this.__chain__)}}),d}var h,d=[],v=[],g=0,m=+new Date+"",y=75,b=40,_=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",E=/\b__p \+= '';/g,w=/\b(__p \+=) '' \+/g,x=/(__e\(.*?\)|\b__t\)) \+\n'';/g,T=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,R=/\w*$/,H=/^\s*function[ \n\r\t]+\w/,k=/<%=([\s\S]+?)%>/g,C=RegExp("^["+_+"]*0+(?=.$)"),j=/($^)/,B=/\bthis\b/,L=/['\n\r\t\u2028\u2029\\]/g,P=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],S=0,A="[object Arguments]",M="[object Array]",z="[object Boolean]",O="[object Date]",D="[object Function]",W="[object Number]",I="[object Object]",N="[object RegExp]",F="[object String]",$={};$[D]=!1,$[A]=$[M]=$[z]=$[O]=$[W]=$[I]=$[N]=$[F]=!0;var q={leading:!1,maxWait:0,trailing:!1},G={configurable:!1,enumerable:!1,value:null,writable:!1},K={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},U={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},V=K[typeof window]&&window||this,J=K[typeof exports]&&exports&&!exports.nodeType&&exports,Q=K[typeof module]&&module&&!module.nodeType&&module,X=Q&&Q.exports===J&&J,Y=K[typeof global]&&global;!Y||Y.global!==Y&&Y.window!==Y||(V=Y);var Z=p();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(V._=Z,define(function(){return Z})):J&&Q?X?(Q.exports=Z)._=Z:J._=Z:V._=Z}).call(this),THREE.Bootstrap=function(t){if(!(this instanceof THREE.Bootstrap))return new THREE.Bootstrap(t);var e={init:!0,element:document.body,plugins:["core"],klass:THREE.WebGLRenderer,parameters:{depth:!0,stencil:!0,preserveDrawingBuffer:!0,antialias:!0},plugindb:THREE.Bootstrap.Plugins||{},aliasdb:THREE.Bootstrap.Aliases||{}};this.__options=_.defaults(t||{},e),this.__options.parameters=_.defaults(this.__options.parameters,e.parameters),this.__inited=!1,this.__destroyed=!1,this.plugins={},this.__options.init&&this.init()},THREE.Bootstrap.prototype={init:function(){function t(t){for(var e=1024;e-->0;){var n=!1,i=[];if(_.each(t,function(t){r[t]?(i=i.concat(r[t]),n=!0):i.push(t)}),!n)return i;t=i}throw"Plug-in alias recursion detected"}if(!this.__inited){this.__inited=!0;var e=this.__options,n=e.plugindb,r=e.aliasdb,i=e.element,a=t(e.plugins),o=this.renderer=new e.klass(e.parameters);return this.canvas=o.domElement,this.element=i,i.appendChild(o.domElement),_.each(a,function(t){var r=n[t];if(r){if(this.plugins[t])throw"Duplicate plugin '"+t+"'";var a=new r(e[t]||{});this.plugins[t]=a,_.extend(this,a.install(this,o,i)||{})}}.bind(this)),this.dispatchEvent({type:"ready"}),this}},destroy:function(){if(this.__inited&&!this.__destroyed){this.__destroyed=!0;var t=this.__options,e=this.renderer,n=t.element;return _.each(this.plugins,function(t){t.uninstall(this,e,n)}.bind(this)),this.plugins={},n.removeChild(e.domElement),this.renderer=null,this}}},THREE.EventDispatcher.prototype.apply(THREE.Bootstrap.prototype),THREE.Bootstrap.prototype.onceEventListener=function(t,e){var n=function(r){this.removeEventListener(t,n),e(r)}.bind(this);this.addEventListener(t,n)},THREE.Bootstrap.Plugins={},THREE.Bootstrap.Aliases={},THREE.Bootstrap.Plugin=function(t){this.options=_.defaults(t||{},this.defaults)},THREE.Bootstrap.Plugin.prototype={defaults:{},install:function(){},uninstall:function(){},set:function(t){_.extend(this.options,t),this.dispatchEvent({type:"change",changes:t})},get:function(){return this.options},api:function(t){return t=t||{},t.set=this.set.bind(this),t.get=this.get.bind(this),t}},THREE.EventDispatcher.prototype.apply(THREE.Bootstrap.Plugin.prototype),THREE.Bootstrap.registerPlugin=function(t,e){var n=function(t){THREE.Bootstrap.Plugin.call(this,t)};n.prototype=_.extend(new THREE.Bootstrap.Plugin,e),THREE.Bootstrap.Plugins[t]=n},THREE.Bootstrap.unregisterPlugin=function(t){delete THREE.Bootstrap.Plugins[t]},THREE.Bootstrap.registerAlias=function(t,e){THREE.Bootstrap.Aliases[t]=e},THREE.Bootstrap.unregisterAlias=function(t){delete THREE.Bootstrap.Aliases[t]},THREE.Bootstrap.registerAlias("empty",["size","fill","loop","time"]),THREE.Bootstrap.registerAlias("core",["empty","scene","camera","render"]),THREE.Bootstrap.registerPlugin("size",{defaults:{width:null,height:null,aspect:null,scale:1,capWidth:1/0,capHeight:1/0},install:function(t,e,n){this.handler=function(){var r,i,a,o,u,l,s,c,f=this.options,p=0,h=0;r=a=void 0===f.width||null==f.width?n.offsetWidth||n.innerWidth||0:f.width,i=o=void 0===f.height||null==f.height?n.offsetHeight||n.innerHeight||0:f.height,s=r/i,f.aspect&&(f.aspect>s?(i=Math.round(r/f.aspect),h=Math.floor((o-i)/2)):(r=Math.round(i*f.aspect),p=Math.floor((a-r)/2)),s=f.aspect),u=Math.min(r*f.scale,f.capWidth),l=Math.min(i*f.scale,f.capHeight),raspect=u/l,raspect>s?u=Math.round(l*s):l=Math.round(u/s),e.setSize(u,l),c=e.domElement.style,c.width=r+"px",c.height=i+"px",c.marginLeft=p+"px",c.marginTop=h+"px",_.extend(t.Size,{renderWidth:u,renderHeight:l,viewWidth:r,viewHeight:i}),t.dispatchEvent({type:"resize",renderWidth:u,renderHeight:l,viewWidth:r,viewHeight:i})
}.bind(this),window.addEventListener("resize",this.handler),n.addEventListener("resize",this.handler),t.addEventListener("ready",this.handler),t.Size=this.api({renderWidth:0,renderHeight:0,viewWidth:0,viewHeight:0}),this.addEventListener("change",this.handler)},uninstall:function(t,e,n){window.removeEventListener("resize",this.handler),n.removeEventListener("resize",this.handler),t.removeEventListener("ready",this.handler),delete t.Size}}),THREE.Bootstrap.registerPlugin("fill",{install:function(t,e,n){function r(t){var e=t.style.height;return"auto"==e||""==e}function i(t){return t.style.height="100%",t.style.margin=0,t.style.padding=0,t}n==document.body&&(this.applied=[n,document.documentElement].filter(r).map(i))},uninstall:function(){function t(t){return t.style.height="",t.style.margin="",t.style.padding="",t}this.applied&&this.applied.map(t)}}),THREE.Bootstrap.registerPlugin("loop",{defaults:{start:!0},install:function(t){this.three=t,this.running=!1,this.options.start&&t.onceEventListener("ready",this.start.bind(this)),t.Loop=this.api({start:this.start.bind(this),stop:this.stop.bind(this),running:!1}),t.start=t.Loop.start,t.stop=t.Loop.stop},uninstall:function(){this.stop()},start:function(){if(!this.running){this.three.Loop.running=this.running=!0,this.three.dispatchEvent({type:"start"});var t=function(){this.running&&requestAnimationFrame(t),["pre","update","render","post"].map(function(t){this.three.dispatchEvent({type:t})}.bind(this))}.bind(this);requestAnimationFrame(t)}},stop:function(){this.running&&(this.running=!1,this.three.dispatchEvent({type:"stop"}))}}),THREE.Bootstrap.registerPlugin("time",{install:function(t){var e=t.Time=this.api({now:0,delta:1/60,average:0,fps:0}),n=0;this.tick=function(){var t=e.now=+new Date/1e3;if(n){var r=e.delta=t-n,i=e.average||r;e.average=i+.1*(r-i),e.fps=1/i}n=t},t.addEventListener("pre",this.tick)},uninstall:function(t){t.removeEventListener("pre",this.tick),delete t.Time}}),THREE.Bootstrap.registerPlugin("scene",{install:function(t){this.scene=new THREE.Scene,t.scene=this.scene},uninstall:function(t){delete t.scene}}),THREE.Bootstrap.registerPlugin("camera",{defaults:{near:.1,far:1e4,type:"perspective",fov:60,aspect:"auto",left:-1,right:1,bottom:-1,top:1},install:function(t){this.three=t,this.handler=this.resize.bind(this),t.addEventListener("resize",this.handler),t.Camera=this.api(),t.camera=null,this.aspect=1,this.change(),this.addEventListener("change",this.change.bind(this))},uninstall:function(t){t.removeEventListener("resize",this.handler),delete t.Camera,delete t.camera},change:function(){var t=this.options;if(this.camera&&t.type==this.cameraType)["near","far","left","right","top","bottom","fov"].map(function(e){void 0!==t[e]&&(this.camera[e]=t[e])}.bind(this));else switch(t.type){case"perspective":this.camera=new THREE.PerspectiveCamera(t.fov,1,t.near,t.far);break;case"orthographic":this.camera=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far)}this.cameraType=t.type,this.three.camera=this.camera,this.update()},update:function(){var t=this.options;"auto"==t.aspect&&(t.aspect=0),this.camera.aspect=t.aspect||this.aspect,this.camera.updateProjectionMatrix(),this.three.dispatchEvent({type:"camera",camera:this.camera})},resize:function(t){this.aspect=t.viewWidth/Math.max(1,t.viewHeight)||1,this.update()}}),THREE.Bootstrap.registerPlugin("render",{install:function(t,e){this.handler=function(){t.scene&&t.camera&&e.render(t.scene,t.camera)},t.addEventListener("render",this.handler)},uninstall:function(t){t.removeEventListener("render",this.handler)}}),THREE.Stats=function(){var t=Date.now(),e=t,n=0,r=1/0,i=0,a=0,o=1/0,u=0,l=0,s=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(t){t.preventDefault(),y(++s%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var f=document.createElement("div");f.id="fps",f.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(f);var p=document.createElement("div");p.id="fpsText",p.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",p.innerHTML="FPS",f.appendChild(p);var h=document.createElement("div");for(h.id="fpsGraph",h.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",f.appendChild(h);74>h.children.length;){var d=document.createElement("span");d.style.cssText="width:1px;height:30px;float:left;background-color:#113",h.appendChild(d)}var v=document.createElement("div");v.id="ms",v.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(v);var g=document.createElement("div");g.id="msText",g.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",g.innerHTML="MS",v.appendChild(g);var m=document.createElement("div");for(m.id="msGraph",m.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",v.appendChild(m);74>m.children.length;)d=document.createElement("span"),d.style.cssText="width:1px;height:30px;float:left;background-color:#131",m.appendChild(d);var y=function(t){switch(s=t){case 0:f.style.display="block",v.style.display="none";break;case 1:f.style.display="none",v.style.display="block"}};return{REVISION:11,domElement:c,setMode:y,begin:function(){t=Date.now()},end:function(){var s=Date.now();n=s-t,r=Math.min(r,n),i=Math.max(i,n),g.textContent=n+" MS ("+r+"-"+i+")";var c=Math.min(30,30-30*(n/200));return m.appendChild(m.firstChild).style.height=c+"px",l++,s>e+1e3&&(a=Math.round(1e3*l/(s-e)),o=Math.min(o,a),u=Math.max(u,a),p.textContent=a+" FPS ("+o+"-"+u+")",c=Math.min(30,30-30*(a/100)),h.appendChild(h.firstChild).style.height=c+"px",e=s,l=0),s},update:function(){t=this.end()}}},THREE.Bootstrap.registerPlugin("stats",{install:function(t){var e=this.stats=new THREE.Stats,n=e.domElement.style;this.begin=e.begin.bind(e),this.end=e.end.bind(e),t.addEventListener("pre",this.begin),t.addEventListener("post",this.end),n.position="absolute",n.top=n.left=0,document.body.appendChild(e.domElement)},uninstall:function(t){t.removeEventListener("pre",this.begin),t.removeEventListener("post",this.end),document.body.removeChild(this.stats.domElement)}});